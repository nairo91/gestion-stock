<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Scanner un matériel chantier</title>

  <!-- Bootstrap -->
  <link rel="stylesheet" href="/css/bootstrap.min.css">
</head>
<body class="bg-light">

  <div class="container py-4">
    <h1>Scanner un matériel chantier</h1>
    <p class="mb-3">Autorise l’accès à la caméra, puis place le QR-code ou le code-barres dans le cadre.</p>
    <p class="small text-muted">Le scan ouvre automatiquement la fiche chantier ou dépôt selon le code détecté. Tu peux toujours renseigner un code-barres manuellement depuis la fiche du matériel.</p>

    <!-- Flux vidéo -->
    <div id="video-container" style="max-width:500px">
      <video id="video" width="100%" height="auto" playsinline></video>
    </div>

    <button id="stopBtn" class="btn btn-danger mt-3">Arrêter le scan</button>

    <!-- Message résultat -->
    <div id="result" class="alert mt-3" style="display:none"></div>
  </div>

  <!-- ZXing : doit être chargé AVANT scanner.js -->
  <script src="https://cdn.jsdelivr.net/npm/@zxing/library@0.19.2/umd/index.min.js" nonce="<%= nonce %>"></script>
  <!-- Script de gestion du scanner (commun dépôt/chantier) -->
  <script src="/js/scanner.js" nonce="<%= nonce %>"></script>
</body>
</html>
